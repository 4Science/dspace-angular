<ng-container *ngIf="searchResults; else loading">
  <ng-container *ngIf="topSection && mode == cardLayoutMode; then gridLayout; else listLayout"></ng-container>
  <div *ngIf="searchResults?.hasFailed">
    {{ "remote.error" | translate }}
  </div>
</ng-container>

<ng-template #loading>
  <ds-loading></ds-loading>
</ng-template>

<ng-template #gridLayout>
  <ds-object-grid
    [configStyle]="topSection?.cardStyle"
    [columnStyle]="topSection?.cardColumnStyle"
    [config]="paginatedSearchOptions.pagination"
    [sortConfig]="paginatedSearchOptions.sort"
    [objects]="searchResults"
    [linkType]="collectionElementLinkTypeEnum.Link"
    [context]="context"
    [noPagination]="true"
  >
  </ds-object-grid>
</ng-template>
<ng-template #listLayout>
  <ul *ngIf="searchResults?.hasSucceeded" class="list-unstyled">
    <li
      *ngFor="
              let object of searchResults?.payload?.page;
              let i = index;
              let last = last
            "
      class="mt-4 mb-4 d-flex"
      [ngClass]="topSection?.itemListStyle"
    >
      <ds-listable-object-component-loader [context]="context"
                                           [index]="i"
                                           [listID]="paginatedSearchOptions.configuration"
                                           [object]="object"
                                           [showMetrics]="showMetrics"
                                           [showThumbnails]="showThumbnails"
                                           [viewMode]="paginatedSearchOptions.view"></ds-listable-object-component-loader>
    </li>
  </ul>
</ng-template>
