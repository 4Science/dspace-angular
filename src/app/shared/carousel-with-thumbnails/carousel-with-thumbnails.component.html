<div class="d-flex flex-md-row flex-column align-items-stretch flex-wrapper" [style.height]="carouselOptions.carouselHeightPx">
  <div class="flex-fill">
    <!-- PREVIEW -->
    <ng-container *ngIf="itemList?.length > 0">
        <ngb-carousel #carousel [interval]="99999999" (slide)="onSlide($event)" class="ds-carousel position-relative ">
          <ng-template ngbSlide *ngFor="let item of itemList; let i = index; let last = last" [attr.id]="'ngb-slide-' + i">
            <div class="carousel-content-wrapper"
                *ngIf="(itemToImageHrefMap$ | async)?.get(item.uuid); let href; else placeholderImage"
                [ngStyle]="{
                        'background-image': 'url(' + href || '' + ')',
                        'height': carouselOptions.keepAspectRatio ? null : carouselOptions.carouselHeightPx + 'px',
                        'aspect-ratio': carouselOptions.keepAspectRatio ? carouselOptions.aspectRatio : null
                  }">
              <div class="picsum-img-wrapper">
                <img [src]="href" [alt]="item.metadata[title][0].value" class="img-fluid blurry-backdrop">
              </div>
            </div>
            <ng-template #placeholderImage>
              <div class="carousel-content-wrapper"
                  [ngStyle]="{
                        'height': carouselOptions.keepAspectRatio ? null : carouselOptions.carouselHeightPx + 'px',
                        'aspect-ratio': carouselOptions.keepAspectRatio ? carouselOptions.aspectRatio : null
                  }">
                <div class="picsum-img-wrapper">
                  <img [src]="placeholderSrc" [alt]="item.metadata[title][0].value" class="img-fluid blurry-backdrop"
                      [ngClass]="{'w-100': carouselOptions.fitWidth, 'h-100': carouselOptions.fitHeight}">
                </div>
              </div>
            </ng-template>
          </ng-template>
        </ngb-carousel>
    </ng-container>

  </div>
  <!-- thumbnail-slider component (start) -->
  <div class="d-flex flex-md-column flex-row align-items-stretch justify-content-center thumbnail-wrapper h-100">
    <div class="thumbnail">
      <!-- THUMBNAIL -->
          <ds-thumbnail-slider
            [scope]="scope"
            [height]="carouselOptions.carouselHeightPx"
            [activeItemIndexInOuterIndicator]="activeItemIndex"
            [numberOfItems]="pageSize"
            [discoveryConfiguration]="discoveryConfiguration"
            (activeIndexChange)="activeIndexChange($event)"
            (onThumbnailSelected)="selectedThumbnail($event)"
            (itemToImageHrefMap)="getItemMapValue($event)"
            (itemsUpdated)="getUpdatedItemList($event)"
            ></ds-thumbnail-slider>
    </div>
  </div>
  <!-- thumbnail-slider component (end) -->
</div>
<div class="d-flex flex-row flex-wrapper justify-content-center">
  <div class="p-3">
    <div class="text-center my-5">
      <h2 class="font-weight-bold" [class]="carouselOptions.titleStyle"
          *ngIf="activeItem?.metadata[title]">
        {{activeItem?.metadata[title][0].value}}</h2>
      <p [class]="carouselOptions.captionStyle"
        *ngIf="activeItem?.metadata[description]; let descriptionObj">
        {{descriptionObj[0].value}}
      </p>
      <ng-container *ngIf="getItemLink(activeItem); let currentLink">
        <a *ngIf="isLinkInternal(currentLink)" [routerLink]="currentLink">
          <ng-container *ngTemplateOutlet="seeMoreButton"></ng-container>
        </a>
        <a *ngIf="!isLinkInternal(currentLink)" [href]="currentLink"
          [target]="carouselOptions.targetBlank ? '_blank' : null">
          <ng-container *ngTemplateOutlet="seeMoreButton"></ng-container>
        </a>
      </ng-container>
      <ng-template #seeMoreButton>
        <button type="button" class="btn btn-secondary mt-3">{{'carousel.button.see-more' | translate}}</button>
      </ng-template>
    </div>
  </div>
</div>
