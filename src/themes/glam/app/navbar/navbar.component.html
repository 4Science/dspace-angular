<nav [ngClass]="{'open': !(menuCollapsed | async)}" [@slideMobileNav]="!(windowService.isXsOrSm() | async) ? 'default' : ((menuCollapsed | async) ? 'collapsed' : 'expanded')"
  class="navbar navbar-expand-md navbar-light p-0 navbar-container" role="navigation" [attr.aria-label]="'nav.main.description' | translate">
  <div class="navbar-inner-container" [class.container]="!(isXsOrSm$ | async)">
    <div class="top-bar mb-3">
      <a class="navbar-brand text-center" href="/home">
        <div class="logo-circle mb-2"></div>
      </a>
      <div class="ml-auto right-container">
        <ul class="navbar-nav ml-auto ml-auto mb-auto mt-3">
          <div class="nav-item" id="home-icon" *ngIf="mainSiteUrl">
            <a class="nav-link navbar-collapsed" target="_blank" [href]="'https://' + mainSiteUrl" [ngbTooltip]="'nav.mainSiteName' | translate">
              <i class="fas fa-home fa-lg fa-fw"></i>
            </a>
          </div>
          <ds-themed-lang-switch class="navbar-collapsed"></ds-themed-lang-switch>
          <ds-themed-auth-nav-menu class="navbar-collapsed"></ds-themed-auth-nav-menu>
          <ds-impersonate-navbar class="navbar-collapsed"></ds-impersonate-navbar>
        </ul>
        <ul id="collapsingNav" class="navbar-nav mb-3">
          <li *ngIf="(isXsOrSm$ | async) && (isAuthenticated$ | async)" class="nav-item">
            <ds-user-menu [inExpandableNavbar]="true"></ds-user-menu>
          </li>
          <ng-container *ngFor="let section of (sections | async)">
            <ng-container *ngComponentOutlet="(sectionMap$ | async).get(section.id)?.component; injector: (sectionMap$ | async).get(section.id)?.injector;"></ng-container>
          </ng-container>
        </ul>
      </div>
    </div>
    <div class="navbar-collapsed">
      <ds-themed-search-navbar></ds-themed-search-navbar>
    </div>
  </div>
</nav>
