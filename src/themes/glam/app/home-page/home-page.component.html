<ng-container *ngIf="site$.value">
  <div *ngFor="let sectionComponentRow of ( sectionComponents | async ); index as rowIndex"
       class="cris-section-row" [class]="componentRowClass(sectionComponentRow)"
       [class.cris-section-light-row]="isLightRow(rowIndex)"
       [class.cris-section-dark-row]="isDarkRow(rowIndex)">
    <div class="container-fluid">
      <div class="row">
        <div *ngFor="let sectionComponent of sectionComponentRow" [class]="componentClass(sectionComponent)"
             [ngSwitch]="sectionComponent.componentType">

          <ds-themed-top-section *ngSwitchCase="'top'"
                                 [sectionId]="sectionId"
                                 [topSection]="$any(sectionComponent)"></ds-themed-top-section>

          <ds-themed-browse-section *ngSwitchCase="'browse'"
                                    [sectionId]="sectionId"
                                    [browseSection]="$any(sectionComponent)"></ds-themed-browse-section>

          <ds-themed-search-section *ngSwitchCase="'search'"
                                    [sectionId]="sectionId"
                                    [searchSection]="$any(sectionComponent)"></ds-themed-search-section>

          <ds-themed-facet-section *ngSwitchCase="'facet'"
                                   [sectionId]="sectionId"
                                   [facetSection]="$any(sectionComponent)"></ds-themed-facet-section>

          <ds-themed-counters-section *ngSwitchCase="'counters'"
                                      [sectionId]="sectionId"
                                      [countersSection]="$any(sectionComponent)"></ds-themed-counters-section>

          <ds-themed-text-section *ngSwitchCase="'text-row'"
                                  [sectionId]="sectionId"
                                  [textRowSection]="$any(sectionComponent)"
                                  [site]="$any(sectionComponent).contentType === 'text-metadata' ? site$.value : null"></ds-themed-text-section>

          <!-- UX-Plus sections-->

          <ds-themed-carousel-section *ngSwitchCase="'carousel'"
                                      [sectionId]="sectionId"
                                      [carouselSection]="$any(sectionComponent)"></ds-themed-carousel-section>

          <ds-themed-slider-section *ngSwitchCase="'slider'"
                                      [sectionId]="sectionId"
                                      [sliderSection]="$any(sectionComponent)"></ds-themed-slider-section>

          <ds-themed-grid-section *ngSwitchCase="'grid'"
                                  [sectionId]="sectionId" [site]="site$.value"
                                  [gridSection]="$any(sectionComponent)"></ds-themed-grid-section>

          <ds-themed-twitter-section *ngSwitchCase="'twitter'"
                                     [sectionId]="sectionId"
                                     [twitterSection]="$any(sectionComponent)"></ds-themed-twitter-section>

          <!-- GLAM sections (on GLAM theme only) -->

          <ds-themed-advanced-top-section *ngSwitchCase="'advanced-top-component'"
                                          [sectionId]="sectionId"
                                          [advancedTopSection]="$any(sectionComponent)"></ds-themed-advanced-top-section>

        </div>
      </div>
    </div>
  </div>
</ng-container>

<ds-view-tracker [object]="site$.value"></ds-view-tracker>
<ds-suggestions-popup></ds-suggestions-popup>
